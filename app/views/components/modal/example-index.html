<div class="row">
	<div class="twelve columns">

		<button class="btn-secondary" type="button" id="add-context">Show Modal</button><br/><br/>

    <button class="btn-secondary" type="button" id="suppress-key">Show Modal (Suppressed Enter)</button><br/><br/>

    <button class="btn-secondary" type="button" id="fullsize-field">Show Modal (Fullsize Field)</button>

		<!-- Modal Example -->
		<div id="modal-add-context" class="hidden">
			<div class="field">
				<label for="subject">Problem</label>
				<input type="text" id="subject" name="subject"/>
			</div>

      <div class="field">
        <label for="location" class="label">Location</label>
        <select id="location" name="location" class="dropdown">
          <option value="N">North</option>
          <option value="S">South</option>
          <option value="E">East</option>
          <option value="W">West</option>
        </select>
      </div>

			<div class="field">
				<label for="notes-max">Notes (maxlength)</label>
				<textarea id="notes-max" class="textarea" maxlength="90" name="notes-max">Line One</textarea>
			</div>
		</div>

	</div>
</div>

<script>
const modalAddContext = $('#modal-add-context');

const modals = {
    'add-context': {
      'title': 'Add Context',
      'id': 'my-id',
      'content': modalAddContext
    },
    'suppress-key': {
      'title': 'Suppress Key',
      'id': 'my-id',
      'content': modalAddContext,
      'suppressEnterKey': true
    },
    'fullsize-field': {
      'title': 'Fullsize Fields',
      'id': 'my-id',
      'content': modalAddContext
    }
  },

  close = function (modal) {
    $('#subject').removeAttr('style');
    $('#notes-max').removeAttr('style');
    
    const dropdown = $('.dropdown-wrapper')
    dropdown.removeAttr('style');
    dropdown.find('.dropdown').removeAttr('style');

    modal.close();
  },

  setModal = function (opt) {
    opt = $.extend({
      buttons: [{
        text: 'Cancel',
        click: function(e, modal) {
          close(modal);
        }
      }, {
        text: 'Save',
        click: function(e, modal) {
          close(modal);
        },
        validate: false,
        isDefault: true
      }]
    }, opt);

    $('body').modal(opt);
  };

  $('#add-context').on('click', function () {
		$(this).focus();
    setModal(modals[this.id]);
  });

  $('#suppress-key').on('click', function () {
		$(this).focus();
    setModal(modals[this.id]);
  });

  $('#fullsize-field').on('click', function () {
    // check if fields have equal space on full width
    if ($(window).width() <= 480) {
      $('#subject').width('100%');
      $('#notes-max').css({ width: '100%', maxWidth: '100%'});

      const dropdown = $('.dropdown-wrapper')
      dropdown.width('100%');
      dropdown.find('.dropdown').width('100%');
    }
		$(this).focus();
    setModal(modals[this.id]);
  });

</script>
